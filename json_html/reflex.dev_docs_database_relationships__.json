{
  "url": "https://reflex.dev/docs/database/relationships/\n",
  "sections": [
    "<h1 class=\"rt-Heading rt-r-size-6 font-x-large lg:font-xx-large scroll-m-[5rem] mt-4\" id=\"relationships\">Relationships</h1><svg class=\"lucide lucide-link !text-violet-11 invisible transition-[visibility_0.075s_ease-out] group-hover:visible mt-4 css-svt5ra\" fill=\"none\" height=\"18\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"></path><path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"></path></svg></a><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">Foreign key relationships are used to link two tables together. For example,\nthe <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">Post</code> model may have a field, <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">user_id</code>, with a foreign key of <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">user.id</code>,\nreferencing a <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">User</code> model. This would allow us to automatically query the <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">Post</code> objects\nassociated with a user, or find the <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">User</code> object associated with a <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">Post</code>.</p><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">To establish bidirectional relationships a model must correctly set the\n<code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">back_populates</code> keyword argument on the <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">Relationship</code> to the relationship\nattribute in the <em>other</em> model.</p><a class=\"rt-Text rt-reset rt-Link rt-underline-none flex flex-row items-center gap-6 hover:!text-violet-11 text-slate-12 cursor-pointer mb-2 transition-colors group css-1macts\" data-accent-color=\"\" href=\"https://reflex.dev/docs/database/relationships/#foreign-key-relationships\">",
    "<h2 class=\"rt-Heading rt-r-size-6 font-large lg:font-x-large scroll-m-[5rem] mt-8\" id=\"foreign-key-relationships\">Foreign Key Relationships</h2><svg class=\"lucide lucide-link !text-violet-11 invisible transition-[visibility_0.075s_ease-out] group-hover:visible mt-8 css-svt5ra\" fill=\"none\" height=\"18\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"></path><path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"></path></svg></a><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">To create a relationship, first add a field to the model that references the\nprimary key of the related table, then add a <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">sqlmodel.Relationship</code> attribute\nwhich can be used to access the related objects.</p><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">Defining relationships like this requires the use of <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">sqlmodel</code> objects as\nseen in the example.</p><pre><div class=\"rt-Box relative mb-4\"><div class=\"rt-Box code-block css-1islnds\"><div><pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">from</span><span style=\"color:#ABB2BF\"> typing </span><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> List, Optional</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> sqlmodel</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> reflex </span><span style=\"color:#C678DD\">as</span><span style=\"color:#ABB2BF\"> rx</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">class</span><span style=\"color:#E5C07B\"> Post</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">rx</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">Model</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">table</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#D19A66\">True</span><span style=\"color:#ABB2BF\">):</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    title: </span><span style=\"color:#56B6C2\">str</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    body: </span><span style=\"color:#56B6C2\">str</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    user_id: </span><span style=\"color:#56B6C2\">int</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> sqlmodel.</span><span style=\"color:#61AFEF\">Field</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">foreign_key</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#98C379\">\"user.id\"</span><span style=\"color:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    user: Optional[</span><span style=\"color:#98C379\">\"User\"</span><span style=\"color:#ABB2BF\">] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> sqlmodel.</span><span style=\"color:#61AFEF\">Relationship</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">        back_populates</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#98C379\">\"posts\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    )</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    flags: Optional[List[</span><span style=\"color:#98C379\">\"Flag\"</span><span style=\"color:#ABB2BF\">]] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> sqlmodel.</span><span style=\"color:#61AFEF\">Relationship</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">        back_populates</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#98C379\">\"post\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    )</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">class</span><span style=\"color:#E5C07B\"> User</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">rx</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">Model</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">table</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#D19A66\">True</span><span style=\"color:#ABB2BF\">):</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    username: </span><span style=\"color:#56B6C2\">str</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    email: </span><span style=\"color:#56B6C2\">str</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    posts: List[Post] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> sqlmodel.</span><span style=\"color:#61AFEF\">Relationship</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">        back_populates</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#98C379\">\"user\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    )</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    flags: List[</span><span style=\"color:#98C379\">\"Flag\"</span><span style=\"color:#ABB2BF\">] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> sqlmodel.</span><span style=\"color:#61AFEF\">Relationship</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">        back_populates</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#98C379\">\"user\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    )</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">class</span><span style=\"color:#E5C07B\"> Flag</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">rx</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">Model</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">table</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#D19A66\">True</span><span style=\"color:#ABB2BF\">):</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    post_id: </span><span style=\"color:#56B6C2\">int</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> sqlmodel.</span><span style=\"color:#61AFEF\">Field</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">foreign_key</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#98C379\">\"post.id\"</span><span style=\"color:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    user_id: </span><span style=\"color:#56B6C2\">int</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> sqlmodel.</span><span style=\"color:#61AFEF\">Field</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">foreign_key</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#98C379\">\"user.id\"</span><span style=\"color:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    message: </span><span style=\"color:#56B6C2\">str</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    post: Optional[Post] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> sqlmodel.</span><span style=\"color:#61AFEF\">Relationship</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">        back_populates</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#98C379\">\"flags\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    )</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    user: Optional[User] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> sqlmodel.</span><span style=\"color:#61AFEF\">Relationship</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">        back_populates</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#98C379\">\"flags\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    )</span></span>\n<span class=\"line\"></span></code></pre></div><button class=\"css-kobh7h\"><svg class=\"lucide lucide-copy css-cqk0y8\" fill=\"none\" height=\"16\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><rect height=\"14\" rx=\"2\" ry=\"2\" width=\"14\" x=\"8\" y=\"8\"></rect><path d=\"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"></path></svg></button></div></div></pre><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">See the <a class=\"rt-Text rt-reset rt-Link rt-underline-always css-1io25ou\" data-accent-color=\"\" href=\"https://sqlmodel.tiangolo.com/tutorial/relationship-attributes/define-relationships-attributes/\">SQLModel Relationship Docs</a> for more details.</p><a class=\"rt-Text rt-reset rt-Link rt-underline-none flex flex-row items-center gap-6 hover:!text-violet-11 text-slate-12 cursor-pointer mb-2 transition-colors group css-1macts\" data-accent-color=\"\" href=\"https://reflex.dev/docs/database/relationships/#querying-relationships\">",
    "<h2 class=\"rt-Heading rt-r-size-6 font-large lg:font-x-large scroll-m-[5rem] mt-8\" id=\"querying-relationships\">Querying Relationships</h2><svg class=\"lucide lucide-link !text-violet-11 invisible transition-[visibility_0.075s_ease-out] group-hover:visible mt-8 css-svt5ra\" fill=\"none\" height=\"18\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"></path><path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"></path></svg></a><a class=\"rt-Text rt-reset rt-Link rt-underline-none flex flex-row items-center gap-6 hover:!text-violet-11 text-slate-12 cursor-pointer mb-2 transition-colors group css-1macts\" data-accent-color=\"\" href=\"https://reflex.dev/docs/database/relationships/#inserting-linked-objects\">",
    "<h3 class=\"rt-Heading rt-r-size-6 font-large scroll-m-[5rem] mt-4\" id=\"inserting-linked-objects\">Inserting Linked Objects</h3><svg class=\"lucide lucide-link !text-violet-11 invisible transition-[visibility_0.075s_ease-out] group-hover:visible mt-4 css-svt5ra\" fill=\"none\" height=\"18\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"></path><path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"></path></svg></a><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">The following example assumes that the flagging user is stored in the state as a\n<code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">User</code> instance and that the post <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">id</code> is provided in the data submitted in the\nform.</p><pre><div class=\"rt-Box relative mb-4\"><div class=\"rt-Box code-block css-1islnds\"><div><pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">class</span><span style=\"color:#E5C07B\"> FlagPostForm</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">rx</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">State</span><span style=\"color:#ABB2BF\">):</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    user: User</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    @rx</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">event</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    def</span><span style=\"color:#61AFEF\"> flag_post</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B;font-style:italic\">self</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66;font-style:italic\">form_data</span><span style=\"color:#ABB2BF\">: dict[</span><span style=\"color:#56B6C2\">str</span><span style=\"color:#ABB2BF\">, Any]):</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        with</span><span style=\"color:#ABB2BF\"> rx.</span><span style=\"color:#61AFEF\">session</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#ABB2BF\"> session:</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">            post </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> session.</span><span style=\"color:#61AFEF\">get</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">                Post, </span><span style=\"color:#56B6C2\">int</span><span style=\"color:#ABB2BF\">(form_data.</span><span style=\"color:#61AFEF\">pop</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#98C379\">\"post_id\"</span><span style=\"color:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">            )</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">            flag </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> Flag</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">                message</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\">form_data.</span><span style=\"color:#61AFEF\">pop</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#98C379\">\"message\"</span><span style=\"color:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">                post</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\">post,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">                user</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#E5C07B\">self</span><span style=\"color:#ABB2BF\">.user,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">            )</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">            session.</span><span style=\"color:#61AFEF\">add</span><span style=\"color:#ABB2BF\">(flag)</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">            session.</span><span style=\"color:#61AFEF\">commit</span><span style=\"color:#ABB2BF\">()</span></span>\n<span class=\"line\"></span></code></pre></div><button class=\"css-kobh7h\"><svg class=\"lucide lucide-copy css-cqk0y8\" fill=\"none\" height=\"16\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><rect height=\"14\" rx=\"2\" ry=\"2\" width=\"14\" x=\"8\" y=\"8\"></rect><path d=\"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"></path></svg></button></div></div></pre><a class=\"rt-Text rt-reset rt-Link rt-underline-none flex flex-row items-center gap-6 hover:!text-violet-11 text-slate-12 cursor-pointer mb-2 transition-colors group css-1macts\" data-accent-color=\"\" href=\"https://reflex.dev/docs/database/relationships/#how-are-relationships-dereferenced?\">",
    "<h3 class=\"rt-Heading rt-r-size-6 font-large scroll-m-[5rem] mt-4\" id=\"how-are-relationships-dereferenced?\">How are Relationships Dereferenced?</h3><svg class=\"lucide lucide-link !text-violet-11 invisible transition-[visibility_0.075s_ease-out] group-hover:visible mt-4 css-svt5ra\" fill=\"none\" height=\"18\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"></path><path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"></path></svg></a><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">By default, the relationship attributes are in <strong>lazy loading</strong> or <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">\"select\"</code>\nmode, which generates a query <em>on access</em> to the relationship attribute. Lazy\nloading is generally fine for single object lookups and manipulation, but can be\ninefficient when accessing many linked objects for serialization purposes.</p><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">There are several alternative loading mechanisms available that can be set on\nthe relationship object or when performing the query.</p><ul class=\"css-1usfqyd\">\n<li class=\"font-normal text-slate-12 mb-4\">\"joined\" or <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">joinload</code> - generates a single query to load all related objects\nat once.</li>\n<li class=\"font-normal text-slate-12 mb-4\">\"subquery\" or <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">subqueryload</code> - generates a single query to load all related\nobjects at once, but uses a subquery to do the join, instead of a join in the\nmain query.</li>\n<li class=\"font-normal text-slate-12 mb-4\">\"selectin\" or <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">selectinload</code> - emits a second (or more) SELECT statement which\nassembles the primary key identifiers of the parent objects into an IN clause,\nso that all members of related collections / scalar references are loaded at\nonce by primary key</li>\n</ul><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">There are also non-loading mechanisms, \"raise\" and \"noload\" which are used to\nspecifically avoid loading a relationship.</p><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">Each loading method comes with tradeoffs and some are better suited for different\ndata access patterns.\nSee <a class=\"rt-Text rt-reset rt-Link rt-underline-always css-1io25ou\" data-accent-color=\"\" href=\"https://docs.sqlalchemy.org/en/14/orm/loading_relationships.html\">SQLAlchemy: Relationship Loading Techniques</a>\nfor more detail.</p><a class=\"rt-Text rt-reset rt-Link rt-underline-none flex flex-row items-center gap-6 hover:!text-violet-11 text-slate-12 cursor-pointer mb-2 transition-colors group css-1macts\" data-accent-color=\"\" href=\"https://reflex.dev/docs/database/relationships/#querying-linked-objects\">",
    "<h3 class=\"rt-Heading rt-r-size-6 font-large scroll-m-[5rem] mt-4\" id=\"querying-linked-objects\">Querying Linked Objects</h3><svg class=\"lucide lucide-link !text-violet-11 invisible transition-[visibility_0.075s_ease-out] group-hover:visible mt-4 css-svt5ra\" fill=\"none\" height=\"18\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"></path><path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"></path></svg></a><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">To query the <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">Post</code> table and include all <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">User</code> and <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">Flag</code> objects up front,\nthe <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">.options</code> interface will be used to specify <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">selectinload</code> for the required\nrelationships. Using this method, the linked objects will be available for\nrendering in frontend code without additional steps.</p><pre><div class=\"rt-Box relative mb-4\"><div class=\"rt-Box code-block css-1islnds\"><div><pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> sqlalchemy</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">class</span><span style=\"color:#E5C07B\"> PostState</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">rx</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">State</span><span style=\"color:#ABB2BF\">):</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    posts: List[Post]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    @rx</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">event</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    def</span><span style=\"color:#61AFEF\"> load_posts</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B;font-style:italic\">self</span><span style=\"color:#ABB2BF\">):</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        with</span><span style=\"color:#ABB2BF\"> rx.</span><span style=\"color:#61AFEF\">session</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#ABB2BF\"> session:</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">            self</span><span style=\"color:#ABB2BF\">.posts </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> session.</span><span style=\"color:#61AFEF\">exec</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">                Post.select.</span><span style=\"color:#61AFEF\">options</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">                    sqlalchemy.orm.</span><span style=\"color:#61AFEF\">selectinload</span><span style=\"color:#ABB2BF\">(Post.user),</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">                    sqlalchemy.orm.</span><span style=\"color:#61AFEF\">selectinload</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">                        Post.flags</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">                    ).</span><span style=\"color:#61AFEF\">options</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">                        sqlalchemy.orm.</span><span style=\"color:#61AFEF\">selectinload</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">                            Flag.user</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">                        ),</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">                    ),</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">                ).</span><span style=\"color:#61AFEF\">limit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">15</span><span style=\"color:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">            ).</span><span style=\"color:#61AFEF\">all</span><span style=\"color:#ABB2BF\">()</span></span>\n<span class=\"line\"></span></code></pre></div><button class=\"css-kobh7h\"><svg class=\"lucide lucide-copy css-cqk0y8\" fill=\"none\" height=\"16\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><rect height=\"14\" rx=\"2\" ry=\"2\" width=\"14\" x=\"8\" y=\"8\"></rect><path d=\"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"></path></svg></button></div></div></pre><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">The loading methods create new query objects and thus may be linked if the\nrelationship itself has other relationships that need to be loaded. In this\nexample, since <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">Flag</code> references <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">User</code>, the <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">Flag.user</code> relationship must be\nchain loaded from the <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">Post.flags</code> relationship.</p><a class=\"rt-Text rt-reset rt-Link rt-underline-none flex flex-row items-center gap-6 hover:!text-violet-11 text-slate-12 cursor-pointer mb-2 transition-colors group css-1macts\" data-accent-color=\"\" href=\"https://reflex.dev/docs/database/relationships/#specifying-the-loading-mechanism-on-the-relationship\">",
    "<h3 class=\"rt-Heading rt-r-size-6 font-large scroll-m-[5rem] mt-4\" id=\"specifying-the-loading-mechanism-on-the-relationship\">Specifying the Loading Mechanism on the Relationship</h3><svg class=\"lucide lucide-link !text-violet-11 invisible transition-[visibility_0.075s_ease-out] group-hover:visible mt-4 css-svt5ra\" fill=\"none\" height=\"18\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"></path><path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"></path></svg></a><p class=\"rt-Text font-normal text-slate-12 mb-4 leading-7\">Alternatively, the loading mechanism can be specified on the relationship by\npassing <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">sa_relationship_kwargs={\"lazy\": method}</code> to <code class=\"rt-reset rt-Code rt-variant-soft code-style\" data-accent-color=\"\">sqlmodel.Relationship</code>,\nwhich will use the given loading mechanism in all queries by default.</p><pre><div class=\"rt-Box relative mb-4\"><div class=\"rt-Box code-block css-1islnds\"><div><pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">from</span><span style=\"color:#ABB2BF\"> typing </span><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> List, Optional</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> sqlmodel</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> reflex </span><span style=\"color:#C678DD\">as</span><span style=\"color:#ABB2BF\"> rx</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">class</span><span style=\"color:#E5C07B\"> Post</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">rx</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">Model</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">table</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#D19A66\">True</span><span style=\"color:#ABB2BF\">):</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">    ...</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    user: Optional[</span><span style=\"color:#98C379\">\"User\"</span><span style=\"color:#ABB2BF\">] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> sqlmodel.</span><span style=\"color:#61AFEF\">Relationship</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">        back_populates</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#98C379\">\"posts\"</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">        sa_relationship_kwargs</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\">{</span><span style=\"color:#98C379\">\"lazy\"</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">\"selectin\"</span><span style=\"color:#ABB2BF\">},</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    )</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    flags: Optional[List[</span><span style=\"color:#98C379\">\"Flag\"</span><span style=\"color:#ABB2BF\">]] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> sqlmodel.</span><span style=\"color:#61AFEF\">Relationship</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">        back_populates</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#98C379\">\"post\"</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">        sa_relationship_kwargs</span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\">{</span><span style=\"color:#98C379\">\"lazy\"</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">\"selectin\"</span><span style=\"color:#ABB2BF\">},</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    )</span></span>\n<span class=\"line\"></span></code></pre></div><button class=\"css-kobh7h\"><svg class=\"lucide lucide-copy css-cqk0y8\" fill=\"none\" height=\"16\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><rect height=\"14\" rx=\"2\" ry=\"2\" width=\"14\" x=\"8\" y=\"8\"></rect><path d=\"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"></path></svg></button></div></div></pre></article>"
  ]
}